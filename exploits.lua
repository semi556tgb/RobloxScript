local Exploits = {}

function Exploits.Setup(tab)
    local ExploitSection = tab:AddSection("Movement Exploits", 1)

    ExploitSection:AddToggle({
        text = "Infinite Jump",
        state = false,
        flag = "InfiniteJumpEnabled",
        callback = function(state)
            if state then
                getgenv().InfiniteJump = true
                game:GetService("UserInputService").JumpRequest:Connect(function()
                    if getgenv().InfiniteJump then
                        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
                    end
                end)
            else
                getgenv().InfiniteJump = false
            end
        end
    })

    ExploitSection:AddSlider({
        text = "CFrame Speed",
        min = 1,
        max = 100,
        flag = "CFrameSpeed",
        callback = function(value)
            getgenv().CFrameSpeedValue = value
        end
    })

    ExploitSection:AddToggle({
        text = "Enable CFrame Speed",
        state = false,
        flag = "CFrameSpeedEnabled",
        callback = function(state)
            getgenv().CFrameSpeedEnabled = state

            if state then
                spawn(function()
                    local player = game:GetService("Players").LocalPlayer
                    local runService = game:GetService("RunService")

                    while getgenv().CFrameSpeedEnabled do
                        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                            local hrp = player.Character.HumanoidRootPart
                            local direction = Vector3.new(0,0,0)
                            if player:GetMouse().W then direction = direction + hrp.CFrame.lookVector end
                            if player:GetMouse().S then direction = direction - hrp.CFrame.lookVector end
                            if player:GetMouse().A then direction = direction - hrp.CFrame.rightVector end
                            if player:GetMouse().D then direction = direction + hrp.CFrame.rightVector end
                            hrp.CFrame = hrp.CFrame + (direction.Unit * (getgenv().CFrameSpeedValue or 5))
                        end
                        runService.Heartbeat:Wait()
                    end
                end)
            end
        end
    })
end

return Exploits
