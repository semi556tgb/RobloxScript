-- exploits.lua

local Exploits = {}
local UIS = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Infinite Jump
function Exploits.InfiniteJump()
    if Exploits._infiniteJumpConnection then
        Exploits._infiniteJumpConnection:Disconnect()
        Exploits._infiniteJumpConnection = nil
        return
    end

    Exploits._infiniteJumpConnection = UIS.JumpRequest:Connect(function()
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
            LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
        end
    end)
end

-- CFrame Speed
Exploits.SpeedEnabled = false
Exploits.SpeedValue = 2

function Exploits.ToggleCFrameSpeed(state, speed)
    Exploits.SpeedEnabled = state
    Exploits.SpeedValue = speed or Exploits.SpeedValue

    if state then
        if Exploits._speedConnection then Exploits._speedConnection:Disconnect() end
        Exploits._speedConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                local moveDir = LocalPlayer.Character.Humanoid.MoveDirection
                LocalPlayer.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame + (moveDir * Exploits.SpeedValue)
            end
        end)
    else
        if Exploits._speedConnection then
            Exploits._speedConnection:Disconnect()
            Exploits._speedConnection = nil
        end
    end
end

-- Spinbot
Exploits.SpinEnabled = false
Exploits.SpinSpeed = 10

function Exploits.ToggleSpinbot(state, speed)
    Exploits.SpinEnabled = state
    Exploits.SpinSpeed = speed or Exploits.SpinSpeed

    if state then
        if Exploits._spinConnection then Exploits._spinConnection:Disconnect() end
        Exploits._spinConnection = game:GetService("RunService").Heartbeat:Connect(function(delta)
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                local hrp = LocalPlayer.Character.HumanoidRootPart
                hrp.CFrame = hrp.CFrame * CFrame.Angles(0, math.rad(Exploits.SpinSpeed), 0)
            end
        end)
    else
        if Exploits._spinConnection then
            Exploits._spinConnection:Disconnect()
            Exploits._spinConnection = nil
        end
    end
end

return Exploits
